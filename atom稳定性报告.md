# atom稳定性报告

# 一、报告概述

本报告聚焦接口稳定性核心指标，基于近7天（统计周期：2025-11-19至2025-11-26）的全量监控数据，从错误数量、错误率、P99 耗时、平均耗时、QPS 五个关键指标切入，全面分析系统的运行状态、暴露潜在风险，并提出针对性优化方案；报告覆盖业务的核心P0接口

（支付、购买）以及非核心P1接口（数据查询、数据统计），为技术优化、风险防控及业务决策提供数据支撑。



# 二、核心指标详细分析



## 1. 错误数量



### 1.1 atom-app、atom-api

1. atom-app、atom-api整体的错误量、错误比例报警较多，并且报警数量与QPS正相关，请求量数据详情可以移步odin监控；

1. 接口错误量统计中，被识别到的错误较多的errorNo主要有以下几种

| 序号 | errorNo      | 说明           |
| :--- | :----------- | :------------- |
| 1    | 59x          | 限流           |
| 2    | 500          |                |
| 3    | 10015、10017 | 读写、连接超时 |
| 4    | 1002         | 参数parse失败  |
| 5    | 1004         | 参数校验失败   |



### 1.2 接口错误的详细分析

>  没有和ELK类似的工具，无法做日志的聚合分析，对于errorNo所对应的各个场景，是结合logInsight以及代码得到的，结果可能与实际情况有偏差，先按照如下思路逐一解决

- 根据odin提供的api获取全部的报警信息

- api地址：报警事件-根据告警组和时间段获取报警消息

- 清洗报警数据

- 对报警数据进行统计分析，维度：项目、接口等级、报警等级、uri



### 1.3 接口错误数量（率）综述

1. 接口的errorNo设置需要有更好的规划，如 公共code、业务细分code，从最近的梳理过程中，有另外一个感悟就是，这个公共的、细分的code，最好能准确的识别到是需要关注的错误、还是不需要处理的日常code；

1. （待定）使用公共的codeError时，通常只会打印"valid param error" 这种文案说明，究竟是哪个字段导致的并不明确，排查时需要根据代码、入参重新走一遍流程去看，在日后的error日志打印过程中，需要更精确；

1. rpc接口的超时时间配置，基本上都符合rpc接口耗时p99，但是从超时数量上看，仍然较多，个别rpc接口需要修改；在调用rpc接口时，超时时间的设置既需要考虑rpc接口要在超时前完成，还要考虑当前的接口的整体耗时，不能因为rpc超时时间设置过长，导致接口超时，另外rpc设置时间过长，长时间的占用连接池、cpu，可能会导致cpu、内存、连接池等资源耗尽，影响服务器的响应速度，产生雪崩效应；不错从目前的cpu、内存、协程角度看，系统很健康。





### 1.4 接口错误数量（率）详情



#### 1.4.1 错误量大的接口整理

| **项目**                                                     | **接口名称**                                                 | **异常类别**                                                 | **异常排查**                                                 | **原因分析**                                                 | **建议**                                                     | **补充一**                                                   |
| :----------------------------------------------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| **atom-app**                                                 | onTripCardBanner                                             | 错误数量                                                     | errorNo = 1004 ，入参校验失败                                | 入参校验失败，主要包括为：行中价格未传（最多）并且，上游调用一次后，返回1004，还会再调一遍![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=176412919148409c2ba4c-6e8d-4421-bcc1-06cadccfff0b%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU)事例：https://monitor.xiaojukeji.com/#/dashboard/logRetrival/trace?date=2025-11-26&idc=us&monitorEnv=USA&traceId=c0a801176926783050283e3210860403 | 上游调用的入参中缺乏核心参数，并且在调用失败后，还会重试同一个调用，有时候重试三次 有时候两次，原因是什么查明参数缺少的原因对于缺少参数的错误重试不能解决问题，上游不应该重试，这样会增加下游压力，资源浪费  附：新老链路同时存在，老链路参数不全，导致报错@彭家鑫 | ![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=1763103476090891f0322-6846-4441-a8bc-eb41b207ec82%2F%E6%88%AA%E5%B1%8F2025-11-1414.57.33.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) |
| 对1004的补充一条trace会对应多条onTripCardBanner的调用，并且会返回多次1004，其中还夹杂50105这个code | 查看上游调用多次的原因，是否包含重试逻辑，下面的链接是一个例子，比较典型，重试基本上是从这里来的：https://monitor.xiaojukeji.com/#/dashboard/logRetrival/trace?date=2025-11-19&idc=us&monitorEnv=USA&traceId=6b5d2ee6691d94fc000035ad60d08eb6 |                                                              |                                                              |                                                              |                                                              |                                                              |
| errorNo = 500，主要报警为：json: cannot unmarshal string into Go value of type dos.HintContent | hint_content 传入为空，需要查看这种场景是不是正常场景        | 非常少，可能是误传                                           |                                                              |                                                              |                                                              |                                                              |
| pass/api/getSideInfo                                         | 错误数量                                                     | errorNo = 1004 刚过50                                        | 校验国家等必须参数，校验失败，非正常大多数场景都为：location_cityid = -1 | 考虑将getSideInfo接口的1004场景移出报警未开定位，报警可以考虑去掉这种场景 | ![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=1763105454851fd593251-200b-4892-952e-2f02b8ffe5eb%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) |                                                              |
| errorNo = 500 ，需要额外关注                                 | 上游：expo/v4/proteanFlow/component/sug_substitute_call随机抽取近一周的500错误数据报错大部分是"errno":500,"errmsg":"invaid cityId :2147483647"请求频次：resp, err := sq.httpclient().Send(ctx, "frequency", req)，返回错误信息get register （ShoppingQuota）info:getRegisterRecordWithoutCache:query register info:record not found | 需要查一下这个城市id，以及上游为什么一直传这个城市 -- 定位问题，导致传入的cityId错误确认请求频次接口返回record not found是否为正常场景，如果非正常，原因是什么？（比如，主从延迟？）如果正常，考虑不用500 code --压测导致的 |                                                              |                                                              |                                                              |                                                              |
| camp/api/homePopup                                           | 错误数量                                                     | errorNo = 1004 刚过50                                        | 大部分为 uid = 0![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=176414166181624356580-9c4d-42f6-a479-7087a265ba32%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU)![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=1764141674066dfd790ae-32d3-48be-a94f-472eb88d7561%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) | 将1004场景移出                                               | ![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=176310565812222d4273b-ac33-4805-be8c-f9013bce04cb%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) |                                                              |
|                                                              |                                                              |                                                              |                                                              |                                                              |                                                              |                                                              |
| ● sum/callee-func=/foundation/coupon/v1/valuationinterface/valuateBatchWithAmount | 错误数量                                                     | cdoe = 502code = 504cdoe = 595code = 10015code = 10017       | 502、503、504 网关错误，此处不讨论595mesh返回限流，与10月份处理数据积压有关10015、10017：根据不同的caller_func 进行分组，查看这个rpc接口的99分位的值，以此来找到比较合理的超时时间 p99时间![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=176363163638056a0b08a-2b20-4902-8714-33a17a6b5ce4%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU)项目中设置的时间为：200 | 不需要修改                                                   | ![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=1763114290149dd308aec-9363-461f-9f65-b13f56419d7e%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) |                                                              |
| ● sum/callee-func=/gulfstream/shopping-quota/events/decrease | 错误数量                                                     | code = 10015cdoe = 10017                                     | 一、从超时时间上面看p99时间![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=1763632283463b55df8d9-5e7b-483e-a1cb-516d1b8ba761%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU)项目中设置的超时时间：150与超时时间设置无关二、QPS错误量高与上游请求量正相关（ shopping - quato 共 16台服务器）![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=1763638820924d63a3d78-b58b-4065-9647-51cdaba06de9%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) | 请求量大网络波动，导致读超时可能是业务原因，比较特殊且请求量极少的场景下，需要获取的数据较多，导致超时正常超时后，会有重试，重试如果还失败，报500，如果系统中500错误比较少，说明重试成功综上，可以考虑增加服务器数量150毫秒的超时时间是比较极限的值，可以考虑适当放宽  shopping-quota项目新增了LOG.didi_request_out_totalTime 指标，由于是新增，可以在运行几天后观察时间@张雄 | ![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=176311451015303e3ffe4-5f84-44fc-bb3f-9e0406ec95d5%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) |                                                              |



| **项目**                                                     | **接口名称**                                                 | **异常类别**                                                 | **异常排查**                                                 | **原因分析**                                                 | **建议**                                                     | **补充一**                                                   |
| :----------------------------------------------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| **atom-api**                                                 | slowPay/bind                                                 | 错误数量                                                     | errorNo = 500 数量过高，基本与全部的请求量持平               | 执行流程，从近10天的日志中找10条数据，报错内容都一样：errorLog1 查询的缓存不存在，缓存未命中打印error是否合理？？key：slowpay_eb_cache_{uid}未命中缓存、非随单购会员，不绑定活动，直接返回error，errorNo = 500_slow_pay_cache_match_failed![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=176371698772571a0a9ad-e73f-4d02-9e73-566dfab097a9%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) | @卢秋呈错误码需要按业务细分 梳理bind接口中报警，筛出非绑定失败场景，errors.New(spConst.SlowPayBindErr)   cityId = 0，未开定位导致获取不到城市信息 | ![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=17631031247945af92644-2648-49f7-9cb9-bea9e2c43272%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) |
| 1002(http parse form error)打印的日志是info，是否可以按照正常请求返回处理 | base.go 入参绑定时报错：入参："location_cityid":0报警：Field validation for 'LocationCityID' failed on the 'required' tag |                                                              |                                                              |                                                              |                                                              |                                                              |
| slowpay/redirect                                             | 错误数量                                                     | errorNo = 500数量高活动绑定失败，需要做更详细的区分          | 查看近7天报错数据，全部为activity_id == 0 执行RedirectLongTimeOut方法，调用os2-api：redirect_long_timeout（接口），返回数据为空未命中os2活动，报警500https://monitor.xiaojukeji.com/#/dashboard/logRetrival/trace?date=2025-11-24&idc=us&monitorEnv=USA&traceId=c0a80171692404c87623db6010cd0303 | 能够明白识别到的错误，不要使用500，要是用业务细分code        | ![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=1763103156001c66f858a-3102-4a44-91de-26681791b1e3%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) |                                                              |
| club/getMemberInfo                                           | 错误数量                                                     | errorNo = 500数量高                                          | 调用rpc接口，报警10017、10002（较少），最终导致接口500查询是否未购买会员（方法：get_valid_member），10017超时timeOut： 100conn_timeout: 30 try: 1如果未购买，获取会员信息（方法 ：get_purchasable_member）10017超时（错误较多，并且集中在255以内，不能使用这个数据，因为当超过250之后会立刻终止，然后返回，所以这个值只是超过250的值，而不是这个请求的真实完成时间）timeOut: 250conn_timeout: 30try: 11002场景（方法：get_purchasable_member）：member not open in this country | 错误数据与请求量相比，并不多，可以不修改查看1002code使用时否正确查看超时后的影响 | ![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=176310316602369a5cd42-bb91-4caf-b126-e1b96b2e6bc2%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) |                                                              |
| common/recommend                                             | 错误数量                                                     | errorNo = 1002 数量较高，是否可以按照正常请求返回处理（入参中必传字段uid未传）![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=176354245962955564a39-616e-4465-8fbd-21565741aeca%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) | RecommendCommonRequest 中UID必传，几乎所有1002错误都是未传导致的 | @卢秋呈与上游沟通，为什么uid不传。                           | ![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=176310410637369d2c378-38b3-4c76-a12b-1bf6b99d978d%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) |                                                              |
|                                                              |                                                              |                                                              |                                                              |                                                              |                                                              |                                                              |
| ● sum/callee-func=/os2_api/activity/redirect                 | 错误数量                                                     | cdoe = 10015code = 10017                                     | redict方法有两种配置，其中超时错误数量主要来自第一个redirecttimeOut : 75redirect_long_timeouttimeOut: 140调用方主要是/common/recommend事例：[https://monitor.xiaojukeji.com/#/logInsight/logRetrival/newExact?endTime=1764056784000&isShowText=true&isShowTime=2&log=all&machine=all&monitorEnv=USA&ns=atom-api.marvel.ibt.didi.com&okDay=6&searchCriteria=callee-func%3D%2Fos2_api%2Factivity%2Fredirect%7C10017&searchType=grep&startTime=1764049584000&treeNode=us01-v.atom-api.marvel.ibt.didi.com%2C1%2Ctrue&url=all](https://monitor.xiaojukeji.com/#/logInsight/logRetrival/newExact?endTime=1764056784000&isShowText=true&isShowTime=2&log=all&machine=all&monitorEnv=USA&ns=atom-api.marvel.ibt.didi.com&okDay=6&searchCriteria=callee-func%3D%2Fos2_api%2Factivity%2Fredirect\|10017&searchType=grep&startTime=1764049584000&treeNode=us01-v.atom-api.marvel.ibt.didi.com%2C1%2Ctrue&url=all) | 找os2重新确认redict耗时自身确认下配置不同超时时间的原因@卢秋呈 | ![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=176311278780092ba3731-19a8-4843-8f18-066c573933c2%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) |                                                              |
| ● sum/callee-func=/gulfstream/shopping-api/item/query/skuInfo/batch | 错误数量                                                     | cdoe = 10015code = 10017                                     | 调用方：common/recommend（最多）timeout：50以下两张图分别为包含调用方和不包含调用方的skuInfo/batch耗时p99数据，接口的耗时并不十分稳定，毛刺较多![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=1764057364191a6b24817-1f96-4597-9d94-f7383a99261b%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU)![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=176405738135435dff34f-647f-4614-baee-4af954235efd%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) | 综合考虑下，毛刺多的原因是作为batch接口，传入的skuId的数量不固定，正常来说，skuId越多，查询时间越长看建议接口增加skuId的数量限制建议外部使用batch接口时，充分考虑skuId的传入数量与调用时间的关系，重新规划timeout时间@张雄 | ![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=1763112877357402be9d2-603b-4d09-97ee-54605ea4b6d1%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) |                                                              |
| ● sum/callee-func=/benefitGrowth/getPurchasableMembership    | 错误数量                                                     | cdoe = 10015code = 10017                                     | 调用方：/club/getMemberInfotimeout: 250超时数量与请求量正相关![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=17640600484015b96f997-5033-45e7-9a30-89f94a8dcae7%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) | 这种场景一半跟上游设置的超时时间关系不大，可能跟rpc的总线、下游服务器数量等有关 | ![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=1763113164811b70a25b8-e548-4eed-bca8-4e31ff3ce2a8%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) |                                                              |
| ● sum/callee-func=/os2_api/activity/get_by_routine_key       | 错误数量                                                     | cdoe = 10015code = 10017                                     | 调用方：caller-func=/gulfstream/atom-api/second_trip/info（90%以上）timeout: 200![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=176406032665752aa2566-a260-4761-a591-c9821079228c%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) | 同上考虑方案：上游请求，根据不同的业务，设置不同的超时时间，比如h5页面，可以相应的将超时时间增加部分业务存在对账，可以保证幂等 与os2沟通过接口的请求时间，get_by_routine_key接口请求时间的毛刺比较多，而且请求耗时的低位和高位相差较大，os2判断为请求增加，os2下游的接口请求耗时增加导致的，暂无结论@卢秋呈 | ![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=17631132662752967bded-e92c-4b0e-96e6-31a9a5ee3186%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) |                                                              |
| ● sum/callee-func=/os2-event/api/outer/standardEvent         | 错误数量                                                     | cdoe = 10015code = 10017                                     | 调用方：caller-func=/gulfstream/atom-api/camp/homeBindtimeout：200![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=176406076522994c65d7c-d82d-41d3-a246-c4cd8d969431%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) os2提供的接口耗时![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=17640712981131961a449-bf86-470f-8b6c-af53b3385f54%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) | 与os2沟通过接口的请求时间，standardEvent接口请求时间的毛刺比较多，而且请求耗时的低位和高位相差较大，os2判断为请求增加，os2下游的接口请求耗时增加导致的，暂无结论@卢秋呈看一下上游是否有重试机制，保证幂等，做到应绑尽绑 | ![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=17631133049292de4d4c6-1831-494f-bc12-878e6f1d8c0b%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) |                                                              |



#### 1.4.2 【p0】接口错误整理

| **接口地址**                                                 | 原因排查                                                     | 建议                                                         |                                                              |
| :----------------------------------------------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| uri=/gulfstream/atom-app/getEstimateInfo                     | errno = 1004大部分场景为：location_cityid = -1事例：https://monitor.xiaojukeji.com/#/dashboard/logRetrival/trace?date=2025-11-25&idc=us&monitorEnv=USA&traceId=544c5f026925913a000073bbc05395bd | 定位问题导致cityid = -1，可以将1004移出                      | ![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=1764151512204f909969b-0c91-43f1-9d6d-7d6cc5ad5730%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) |
| errno = 500报警基本上是invaid cityId :2147483647与pass/api/getSideInfo接口的报错一致事例：https://monitor.xiaojukeji.com/#/dashboard/logRetrival/trace?date=2025-11-23&idc=us&monitorEnv=USA&traceId=0a5398026922ed4363200c7e10fc0303 | 使用详细的业务码替换，然后移出这个报警                       |                                                              |                                                              |
| uri=/atom-app/pass/api/h5/buy                                | errno = 500大部分报警是请求atom-api接口报警接口：client.Client("atom-api").Send(ctx, "buy_pass", req)request failed, errmsg: purchaseCheck:frequency not enoughhttps://monitor.xiaojukeji.com/#/dashboard/logRetrival/trace?date=2025-11-26&idc=us&monitorEnv=USA&traceId=0a9d98a569264c46272b359c0cea5402redis加锁失败key：key=atom-app:buy:pass:369436164103414-360287970199336443事例：https://monitor.xiaojukeji.com/#/dashboard/logRetrival/trace?date=2025-11-26&idc=us&monitorEnv=USA&traceId=0a86207769264dd670b92ea80ce0a702![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=17641577434044e531e73-9d33-41c0-aa7c-8a94764badbe%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) | 调用shopping-api 购买接口超频次，为正常场景，atom需要对这种场景的code进行区分，不要用500 | ![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=1764151497736912e65a6-4e44-479f-a787-8acf47640bd0%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) |
|                                                              |                                                              |                                                              |                                                              |
| uri=/gulfstream/atom-api/pass/onTripBuy                      | errno = 50501状态检查不一致![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=1764158825572b2cdad57-fca1-49fa-9485-193fc8d789d0%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU)errno = 500加锁失败事例：https://monitor.xiaojukeji.com/#/dashboard/logRetrival/trace?date=2025-11-25&idc=us&monitorEnv=USA&traceId=c0a80fb66925980ed60d7f3e10f40403![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=176415925296441b45980-f966-4950-b769-982fa2bdd13f%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU)![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=176415967971196f402c0-4164-438b-b6cc-61d314e135b6%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU)订单状态不满足【行中】概念事例：https://monitor.xiaojukeji.com/#/dashboard/logRetrival/trace?date=2025-11-26&idc=us&monitorEnv=USA&traceId=b69aa8756926df7a00000219e32a6246![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=17641603314010630024f-d361-44d5-aaf0-3802e54ae0cc%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) | 状态检查不一致，可以理解为端上在请求后端接口过程中，状态发生了变更，从错误数量上看，这种场景并不少，需要考虑修复这种问题，比如做入参修正、或者只要保证当前状态可买，就继续完成动作如1所说，极限状态，比如后端查询order后，状态一致，但紧随着状态就发生了变更，变成不满足条件，这种场景再下一层是否有兜底？@彭家鑫  加锁失败较少，可能是网络波动  不满足行中状态，是否需要更详细的code | ![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=1764151766223c0a11421-5e7b-442f-aaf5-7d5e04cbe1ae%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) |
| uri=/gulfstream/atom-api/pass/buy                            | 可以查看p0接口 /api/h5/buy的接口报错，基本上是               | 调用os2接口超时，这里配置的超时时间是75（另外还有一个配置的是140）事例：https://monitor.xiaojukeji.com/#/dashboard/logRetrival/trace?date=2025-11-26&idc=us&monitorEnv=USA&traceId=0a0f162f6926ecb9064c39b603ef5b02![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=17641616768512d3c82b2-103a-49a5-8099-f7d3aaf06f8d%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU)调用shopping-api的购买接口时，频次超时，场景为正常场景，可忽略，新增code业务码![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=17641620409257cf8ca25-685a-40fd-9640-657f5d2374d5%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU)shopping-api代码报错部分：![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=1764162272882c5117d4f-a7d2-4c3a-b26b-9aab08eac501%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) | ![img](https://didoc.didichuxing.com/api/uploadfile?b=didoc-upload-image-prod&k=1764151863819ab705bb6-e926-42f9-b488-e4f863f757f5%2Fimage.png&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVnQTdCaXhpODk2MXZ4MW1ubFVNQlp1cEZOYXJZQW5KIiwidXNlcm5hbWUiOiJsdW9iaWFvX2kiLCJkb2NJZCI6Ijc3NTQxNTAiLCJpYXQiOjE3NzA5ODk0OTIsImV4cCI6MTc3MTU5NDI5Mn0.xe5giU4SRtZtfhT70vgvH7fC4aLqqilxaFdFl-xg6jU) |





## 2. 环比/同比请求量

策略配置： 全量接口，环比/同比请求量的报警目前是按照 ，1分钟的请求量的平均值，相对七天前的时间点下降50%报警；

总结：目前系统的全部接口短时间内请求量并不稳定，但是总体的趋势不变，且呈现出规律性变化，一天为一个周期，暂时没有修复需求



向其他业务取经，请求趋势的监控怎么做



思考：运营活动导致的请求量增加、降低该如何监控？



# 数据参考



## 1. rpc读写超时时间

|                    | api（服务级别） | function（接口级别） | 描述     | 默认值 |
| :----------------- | :-------------- | :------------------- | :------- | :----- |
| timeoutMsec        | 支持            | 支持                 | 读超时   | 400ms  |
| connectTimeoutMsec | 支持            | 支持                 | 连接超时 | 100ms  |



## 2. dirpc的Errno含义

| **错误码** | **错误码含义**                                               |
| :--------- | :----------------------------------------------------------- |
| 10001      | DiRPC 初始化出现问题                                         |
| 10002      | DiRPC 内部调用后，HTTP 协议的返回 Response 为空              |
| 10003      | DiRPC 内部调用，调用出现异常                                 |
| 10004      | 暂时无用                                                     |
| 10005      | DiRPC 没能获取到下游的 Client，不再进行重试                  |
| 10006      | Thrift调用出现异常                                           |
| 10015      | 连接超时 （>=1.6.0）                                         |
| 10017      | 读写超时 （>=1.6.0）                                         |
| 11012      | DiRPC 发生熔断，具体熔断类型看异常信息                       |
| 11013      | DiRPC 开启 Mock 指定下游后，触发 Mock 将会返回该错误码       |
| 59x        | 限流返回router/inrouter 限流模块设定流量状态dirpc限流使用状态码httpdns goroutine限流598是接入层自保限流596是业务在接入层配置的限流595是mesh返回的限流 |

![img](https://img-ys011.didistatic.com/static/cooper_cn/livechat/assets/livechat_send.svg)